var H=(r,i,t)=>{if(!i.has(r))throw TypeError("Cannot "+t)};var o=(r,i,t)=>(H(r,i,"read from private field"),t?t.call(r):i.get(r)),g=(r,i,t)=>{if(i.has(r))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(r):i.set(r,t)},p=(r,i,t,n)=>(H(r,i,"write to private field"),n?n.call(r,t):i.set(r,t),t);var F=(r,i,t)=>(H(r,i,"access private method"),t);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const e of s.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var X={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(r){(function(i,t){r.exports?r.exports=t():i.Toastify=t()})(V,function(i){var t=function(e){return new t.lib.init(e)},n="1.12.0";t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:n,constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=e.duration===0?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity=e.gravity==="bottom"?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=e.stopOnFocus===void 0?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=e.escapeMarkup!==void 0?e.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=e.ariaLive||t.defaults.ariaLive,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var f in this.options.style)e.style[f]=this.options.style[f];if(this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,this.options.avatar!==""){var C=document.createElement("img");C.src=this.options.avatar,C.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?e.appendChild(C):e.insertAdjacentElement("afterbegin",C)}if(this.options.close===!0){var h=document.createElement("button");h.type="button",h.setAttribute("aria-label","Close"),h.className="toast-close",h.innerHTML="&#10006;",h.addEventListener("click",(function(x){x.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var u=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&u>360?e.insertAdjacentElement("afterbegin",h):e.appendChild(h)}if(this.options.stopOnFocus&&this.options.duration>0){var v=this;e.addEventListener("mouseover",function(x){window.clearTimeout(e.timeOutValue)}),e.addEventListener("mouseleave",function(){e.timeOutValue=window.setTimeout(function(){v.removeElement(e)},v.options.duration)})}if(typeof this.options.destination<"u"&&e.addEventListener("click",(function(x){x.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&e.addEventListener("click",(function(x){x.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var k=a("x",this.options),O=a("y",this.options),S=this.options.position=="left"?k:"-"+k,z=this.options.gravity=="toastify-top"?O:"-"+O;e.style.transform="translate("+S+","+z+")"}return e},showToast:function(){this.toastElement=this.buildToast();var e;if(typeof this.options.selector=="string"?e=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?e=this.options.selector:e=document.body,!e)throw"Root element is not defined";var f=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,f),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}).bind(this),400)}},t.reposition=function(){for(var e={top:15,bottom:15},f={top:15,bottom:15},C={top:15,bottom:15},h=document.getElementsByClassName("toastify"),u,v=0;v<h.length;v++){s(h[v],"toastify-top")===!0?u="toastify-top":u="toastify-bottom";var k=h[v].offsetHeight;u=u.substr(9,u.length-1);var O=15,S=window.innerWidth>0?window.innerWidth:screen.width;S<=360?(h[v].style[u]=C[u]+"px",C[u]+=k+O):s(h[v],"toastify-left")===!0?(h[v].style[u]=e[u]+"px",e[u]+=k+O):(h[v].style[u]=f[u]+"px",f[u]+=k+O)}return this};function a(e,f){return f.offset[e]?isNaN(f.offset[e])?f.offset[e]:f.offset[e]+"px":"0px"}function s(e,f){return!e||typeof f!="string"?!1:!!(e.className&&e.className.trim().split(/\s+/gi).indexOf(f)>-1)}return t.lib.init.prototype=t.lib,t})})(X);var J=X.exports;const b=_(J);var I,j;class K{constructor(i="marcador"){g(this,I,void 0);g(this,j,[{name:"X",puntos:0},{name:"O",puntos:0}]);p(this,I,i),this.imprimir()}addPuntos(i){let t=o(this,j).find(n=>n.name===i);t.puntos++,this.imprimir()}imprimir(){let i=document.getElementById(o(this,I)),t=document.createElement("ul");o(this,j).forEach(n=>{let a=document.createElement("li");a.textContent=`Jugador ${n.name} tiene ${n.puntos} puntos`,t.append(a)}),i.innerHTML="",i.append(t)}}I=new WeakMap,j=new WeakMap;var R,E,M;class q{constructor(i="logs"){g(this,E);g(this,R,void 0);p(this,R,document.getElementById(i))}logMovimiento(i,t,n){const a=`El jugador ${i} ha puesto una ficha en la casilla ${t},${n}`;F(this,E,M).call(this,a)}logFinPartida(i){const t=`Fin de la partida. Ganó el jugador ${i}`;F(this,E,M).call(this,t)}logEmpate(){F(this,E,M).call(this,"Fin de la partida. Empate.")}logInicioRonda(){F(this,E,M).call(this,"Inicio de una nueva ronda.")}}R=new WeakMap,E=new WeakSet,M=function(i){const t=document.createElement("p");t.textContent=`${new Date().toLocaleTimeString()}: ${i}`,o(this,R).appendChild(t)};var c,l,d,B,W,P,L;class U{constructor(i=3,t=!1){g(this,c,void 0);g(this,l,void 0);g(this,d,void 0);g(this,B,void 0);g(this,W,void 0);g(this,P,void 0);g(this,L,!1);p(this,c,new Array),p(this,l,i),p(this,P,t),this.movimientoLogger=new q;for(let n=0;n<o(this,l);n++){o(this,c)[n]=new Array;for(let a=0;a<o(this,l);a++)o(this,c)[n][a]=null}p(this,d,"X"),p(this,W,new K)}imprimir(i="tablero"){let t=document.getElementById(i);p(this,B,i),t.innerHTML="";for(let n=0;n<o(this,l);n++)for(let a=0;a<o(this,l);a++){let s=document.createElement("div");s.dataset.fila=n,s.dataset.columna=a,s.dataset.libre="",o(this,c)[n][a]&&(s.textContent=o(this,c)[n][a],s.dataset.libre=o(this,c)[n][a],s.classList.add(o(this,c)[n][a]==="X"?"x-style":"o-style")),t.appendChild(s),this.addEventClick(s)}t.style.gridTemplateColumns=`repeat(${o(this,l)}, 1fr)`}isFree(i,t){return o(this,c)[i][t]===null}setCasilla(i,t,n){return this.isFree(i,t)?(o(this,c)[i][t]=n,!0):!1}getCasilla(i,t){return o(this,c)[i][t]}toogleTurno(){if(o(this,L))return!1;if(o(this,d)==="X"){if(p(this,d,"O"),o(this,P)){let i=this.getCasillaFreeRandom();if(this.setCasilla(i.i,i.j,"O"),this.imprimir(),this.comprobarResultados(),o(this,L))return!1;this.toogleTurno()}}else p(this,d,"X")}comprobarResultados(){let i,t,n=!1;for(i=0;i<o(this,l)&&!n;i++){let s=0;for(t=0;t<o(this,l);t++)t!==0&&this.getCasilla(i,t)===this.getCasilla(i,t-1)&&this.getCasilla(i,t)!==null&&s++;s===o(this,l)-1&&(console.log("Linea"),n=!0)}for(t=0;t<o(this,l)&&!n;t++){let s=0;for(i=0;i<o(this,l);i++)i!==0&&this.getCasilla(i,t)===this.getCasilla(i-1,t)&&this.getCasilla(i,t)!==null&&s++;s===o(this,l)-1&&(console.log("Columna"),n=!0)}let a=0;for(let s=0;s<o(this,l);s++)s!==0&&this.getCasilla(s,s)===this.getCasilla(s-1,s-1)&&this.getCasilla(s,s)!==null&&a++;a===o(this,l)-1&&(console.log("Diagonal de izq a derecha"),n=!0),a=0;for(let s=o(this,l)-1;s>=0;s--)if(s!==o(this,l)-1){let e=o(this,l)-1-s;this.getCasilla(s,e)===this.getCasilla(s+1,e-1)&&this.getCasilla(s,e)!==null&&a++}a===o(this,l)-1&&(console.log("Diagonal de derecha a izquierda"),n=!0),n?(p(this,L,!0),b({text:`Ha ganado el jugador ${o(this,d)}`,newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast(),document.querySelectorAll('div[data-libre=""]').forEach(e=>{e.dataset.libre="-"}),o(this,W).addPuntos(o(this,d)),document.querySelector(".clearGame").classList.toggle("show"),setTimeout(()=>{this.movimientoLogger.logFinPartida(o(this,d))},50),o(this,d)==="X"?this.victoriasX++:this.victoriasO++,G.returnRounds()>G.returnRoundsInput()&&(this.victoriasX>this.victoriasO?b({text:"El jugador X ha ganado la partida",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"green"},onClick:function(){}}).showToast():this.victoriasO>this.victoriasX?b({text:"El jugador O ha ganado la partida",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"green"},onClick:function(){}}).showToast():b({text:"La partida ha terminado en empate",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"green"},onClick:function(){}}).showToast())):this.isFull()&&(b({text:"Han sido tablas",newWindow:!0,close:!0,gravity:"top",position:"center",stopOnFocus:!0,style:{background:"blue"},onClick:function(){}}).showToast(),document.querySelector(".clearGame").classList.toggle("show"),p(this,L,!0),setTimeout(()=>{this.movimientoLogger.logEmpate()},50))}isFull(){return!o(this,c).some(i=>i.some(t=>t===null))}addEventClick(i){i.addEventListener("click",t=>{let n=t.currentTarget;n.dataset.libre===""&&(n.textContent=o(this,d),this.setCasilla(n.dataset.fila,n.dataset.columna,o(this,d)),n.dataset.libre=o(this,d),n.classList.remove("x-style","o-style"),n.classList.add(o(this,d)==="X"?"x-style":"o-style"),this.comprobarResultados(),this.movimientoLogger.logMovimiento(o(this,d),n.dataset.fila,n.dataset.columna),this.toogleTurno())}),i.addEventListener("mouseover",t=>{t.currentTarget.dataset.libre===""&&(t.currentTarget.textContent=o(this,d))}),i.addEventListener("mouseleave",t=>{t.currentTarget.dataset.libre===""&&(t.currentTarget.textContent="")})}get dimension(){return o(this,l)}get elementID(){return o(this,B)}limpiar(){p(this,c,o(this,c).map(i=>i.map(t=>null))),p(this,L,!1),this.imprimir(),document.querySelector(".clearGame").classList.toggle("show"),this.movimientoLogger.logInicioRonda()}getCasillaFreeRandom(){let i,t;do i=Math.floor(Math.random()*o(this,l)),t=Math.floor(Math.random()*o(this,l));while(!this.isFree(i,t));return{i,j:t}}}c=new WeakMap,l=new WeakMap,d=new WeakMap,B=new WeakMap,W=new WeakMap,P=new WeakMap,L=new WeakMap;const Q=document.getElementById("createTable"),m=document.getElementById("dimension"),y=document.getElementById("rounds"),Y=document.getElementById("resetGame"),Z=document.querySelectorAll(".clearGameButton"),$=document.querySelector(".preGame"),A=document.querySelector(".inGame"),N=document.getElementById("logs"),D=document.getElementById("infoRonda");let T,w=1;const tt=new q(N.id);Q.addEventListener("click",r=>{if(!m.value)return b({text:"Debe indicar una dimensión válida",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),m.classList.add("error"),m.focus(),!1;if(!y.value)return b({text:"Debe indicar un numero de rondas válido",duration:3e3,newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),y.classList.add("error"),y.focus(),!1;if(isNaN(m.value))return b({text:"Debe introducir un número válido",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),m.classList.add("error"),m.focus(),!1;if(isNaN(y.value))return b({text:"Debe introducir un número válido",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"red"},onClick:function(){}}).showToast(),m.classList.add("error"),m.focus(),!1;let i=document.getElementById("machine");T=new U(parseInt(m.value),i.checked),T.imprimir("tablero"),D.textContent=`Ronda ${w} de ${y.value}`,$.classList.toggle("hide"),A.classList.toggle("hide"),N.classList.toggle("hide"),tt.logInicioRonda()});m.addEventListener("keydown",()=>{m.classList.remove("error")});for(let r of Z)r.addEventListener("click",()=>{w=w+1,D.textContent=`Ronda ${w} de ${y.value}`,T.limpiar(),w>y.value&&(w=1,D.textContent="",document.getElementById(T.elementID).innerHTML="",setTimeout(()=>{document.getElementById("marcador").innerHTML="",N.innerHTML="",T=null,$.classList.toggle("hide"),A.classList.toggle("hide"),N.classList.toggle("hide"),m.value="",y.value=""},2e3))});Y.addEventListener("click",r=>{document.getElementById(T.elementID).innerHTML="",document.getElementById("marcador").innerHTML="",N.innerHTML="",T=null,w=1,D.textContent="",$.classList.toggle("hide"),A.classList.toggle("hide"),N.classList.toggle("hide"),m.value="",y.value=""});function et(){return y.value}function it(){return w}const G={returnRoundsInput:et,returnRounds:it};
